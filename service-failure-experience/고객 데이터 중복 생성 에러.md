# 고객 데이터 중복 생성 에러

## 문제

특정 이벤트 발생시 고객 데이터를 생성하는데 중복으로 생성되는 문제

## 원인

이벤트가 순간적으로 2번 이상 발생할 시, DB Replica Lag으로 인해 뒷 이벤트에서 고객 데이터가 생성되지 않았다고 판단하여 중복 생성함

## 해결

1. 고객 데이터 조회하는 로직의 DB를 Master DB로 고정하여 동시성 문제를 해결함

## 통찰

1. 데이터 조회 시, 이 로직에서 Replica DB를 조회해도 되는지 고민해보는 습관을 들여야겠다.
